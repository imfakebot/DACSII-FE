<div class="payment-result-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-wrapper">
    <div class="spinner"></div>
    <p class="loading-text">Đang xác thực thanh toán...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="!loading && error" class="result-card error-card">
    <div class="icon-wrapper error-icon">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="12" cy="12" r="10" stroke-width="2"/>
        <line x1="15" y1="9" x2="9" y2="15" stroke-width="2"/>
        <line x1="9" y1="9" x2="15" y2="15" stroke-width="2"/>
      </svg>
    </div>
    <h1 class="title">Có lỗi xảy ra</h1>
    <p class="message">{{ error }}</p>
    <div class="actions">
      <button class="btn btn-secondary" (click)="goToHome()">
        <span>Về trang chủ</span>
      </button>
    </div>
  </div>

  <!-- Payment Result -->
  <div *ngIf="!loading && paymentData && !error" class="result-card" [class.success-card]="paymentData.success" [class.failure-card]="!paymentData.success">
    <!-- Success Icon -->
    <div *ngIf="paymentData.success" class="icon-wrapper success-icon">
      <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="12" cy="12" r="10" stroke-width="2"/>
        <path d="M9 12l2 2 4-4" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </div>

    <!-- Failure Icon -->
    <div *ngIf="!paymentData.success" class="icon-wrapper error-icon">
      <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="12" cy="12" r="10" stroke-width="2"/>
        <line x1="15" y1="9" x2="9" y2="15" stroke-width="2"/>
        <line x1="9" y1="9" x2="15" y2="15" stroke-width="2"/>
      </svg>
    </div>

    <h1 class="title">
      {{ paymentData.success ? 'Thanh toán thành công!' : 'Thanh toán thất bại' }}
    </h1>

    <p class="message">{{ paymentData.message }}</p>

    <!-- Payment Details -->
    <div class="details-section">
      <div class="detail-row">
        <span class="label">Mã đơn hàng:</span>
        <span class="value">{{ paymentData.orderId }}</span>
      </div>
      <div class="detail-row" *ngIf="paymentData.amount">
        <span class="label">Số tiền:</span>
        <span class="value highlight">{{ formatAmount(paymentData.amount) }}</span>
      </div>
      <div class="detail-row" *ngIf="paymentData.transactionNo">
        <span class="label">Mã giao dịch:</span>
        <span class="value">{{ paymentData.transactionNo }}</span>
      </div>
      <div class="detail-row" *ngIf="paymentData.bankCode">
        <span class="label">Ngân hàng:</span>
        <span class="value">{{ paymentData.bankCode }}</span>
      </div>
      <div class="detail-row" *ngIf="paymentData.payDate">
        <span class="label">Thời gian:</span>
        <span class="value">{{ formatDate(paymentData.payDate) }}</span>
      </div>
      <div class="detail-row">
        <span class="label">Mã phản hồi:</span>
        <span class="value">{{ paymentData.responseCode }}</span>
      </div>
    </div>

    <!-- Actions -->
    <div class="actions">
      <button *ngIf="paymentData.success" class="btn btn-primary" (click)="goToMyBookings()">
        <span>Xem đơn đặt sân</span>
      </button>
      <button *ngIf="!paymentData.success" class="btn btn-primary" (click)="goToHome()">
        <span>Thử lại</span>
      </button>
      <button class="btn btn-secondary" (click)="goToHome()">
        <span>Về trang chủ</span>
      </button>
    </div>
  </div>
</div>
