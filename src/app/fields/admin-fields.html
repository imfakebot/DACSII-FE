<div class="admin-fields-page">
  <header class="page-header">
    <div class="header-content">
      <div class="header-title">
        <h1>‚öΩ Qu·∫£n l√Ω S√¢n</h1>
        <p class="subtitle">Qu·∫£n l√Ω v√† theo d√µi t·∫•t c·∫£ s√¢n b√≥ng trong h·ªá th·ªëng</p>
      </div>
      <div class="header-actions" *ngIf="isAdmin">
        <button class="btn btn-refresh" (click)="load()" [disabled]="loading">
          <span class="icon">‚Üª</span> T·∫£i l·∫°i
        </button>
        <button class="btn btn-primary" (click)="onCreate()">
          <span class="icon">+</span> T·∫°o s√¢n m·ªõi
        </button>
      </div>
    </div>
  </header>

  <!-- Stats Cards -->
  <div class="stats-grid" *ngIf="isAdmin">
    <div class="stat-card stat-card--blue">
      <div class="stat-icon">‚öΩ</div>
      <div class="stat-content">
        <div class="stat-value">{{ fields.length }}</div>
        <div class="stat-label">T·ªïng s√¢n</div>
      </div>
    </div>
    <div class="stat-card stat-card--green">
      <div class="stat-icon">‚úÖ</div>
      <div class="stat-content">
        <div class="stat-value">{{ getActiveCount() }}</div>
        <div class="stat-label">ƒêang ho·∫°t ƒë·ªông</div>
      </div>
    </div>
    <div class="stat-card stat-card--orange">
      <div class="stat-icon">‚è∏Ô∏è</div>
      <div class="stat-content">
        <div class="stat-value">{{ getInactiveCount() }}</div>
        <div class="stat-label">T·∫°m ng∆∞ng</div>
      </div>
    </div>
    <div class="stat-card stat-card--purple">
      <div class="stat-icon">üèóÔ∏è</div>
      <div class="stat-content">
        <div class="stat-value">{{ getTypeCount() }}</div>
        <div class="stat-label">Lo·∫°i s√¢n</div>
      </div>
    </div>
  </div>

  <div *ngIf="error" class="alert alert-error">‚ö†Ô∏è {{ error }}</div>
  <div *ngIf="!error && fields?.length === 0 && !loading" class="alert alert-warning">üöß Ch∆∞a c√≥ s√¢n n√†o. H√£y t·∫°o s√¢n m·ªõi!</div>

  <section class="card" *ngIf="isAdmin; else noPermission">
    <div class="card-header">
      <h2 class="card-title">Danh s√°ch s√¢n ({{ fields.length }})</h2>
    </div>

    <div class="fields-grid" *ngIf="!loading; else loadingTpl">
      <div *ngFor="let f of fields" class="field-card">
        <div class="field-card-header">
          <div class="field-icon">‚öΩ</div>
          <span class="status-badge" [ngClass]="{ 'status-active': f.status, 'status-inactive': !f.status }">
            <span class="status-dot"></span>
            {{ f.status ? 'Ho·∫°t ƒë·ªông' : 'T·∫°m ng∆∞ng' }}
          </span>
        </div>
        
        <div class="field-card-body">
          <h3 class="field-name">{{ f.name }}</h3>
          
          <div class="field-info">
            <div class="info-item">
              <span class="info-label">üè∑Ô∏è Lo·∫°i s√¢n:</span>
              <span class="info-value">{{ f.fieldType || f.type || 'Ch∆∞a x√°c ƒë·ªãnh' }}</span>
            </div>
            
            <div class="info-item" *ngIf="f.street || f.city">
              <span class="info-label">üìç ƒê·ªãa ch·ªâ:</span>
              <span class="info-value">{{ f.street || f.city || '-' }}</span>
            </div>
            
            <div class="info-item" *ngIf="f.description">
              <span class="info-label">üìù M√¥ t·∫£:</span>
              <span class="info-value">{{ f.description }}</span>
            </div>
          </div>
        </div>
        
        <div class="field-card-footer">
          <button class="btn-card btn-card--edit" (click)="onEdit(f.id)" title="Ch·ªânh s·ª≠a">
            <span class="icon">‚úèÔ∏è</span> S·ª≠a
          </button>
          <button class="btn-card btn-card--delete" (click)="onDelete(f.id)" title="X√≥a">
            <span class="icon">üóëÔ∏è</span> X√≥a
          </button>
        </div>
      </div>
    </div>
  </section>

  <ng-template #loadingTpl>
    <div class="loading">ƒêang t·∫£i danh s√°ch...</div>
  </ng-template>

  <ng-template #noPermission>
    <div class="alert alert-error">B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p khu v·ª±c n√†y.</div>
  </ng-template>
</div>