<div class="login-page">
  <div class="container">
    <div class="loading-overlay" *ngIf="loading">
      <div class="loading-box" role="status" aria-live="polite">
        <span class="spinner" aria-hidden="true"></span>
        <span class="loading-text">Đang xử lý...</span>
      </div>
    </div>
    <div class="heading">Sign In</div>
    <form class="form" *ngIf="!awaitingVerification" (ngSubmit)="submit()" #f="ngForm" novalidate>
      <input class="input" type="email"  name="email" id="email" placeholder="E-mail" required email [(ngModel)]="email" #emailModel="ngModel">
      <!-- <div class="field-error" *ngIf="emailModel.invalid && emailModel.touched">Email không hợp lệ</div> -->
       <small class="field-error" *ngIf="emailModel.invalid && emailModel.touched">Email không hợp lệ</small>
      <input class="input" type="password" name="password" id="password" placeholder="Password" required minlength="8" [(ngModel)]="password" #pwModel="ngModel">
      <!-- <div class="field-error" *ngIf="pwModel.invalid && pwModel.touched">Mật khẩu tối thiểu 8 ký tự</div> -->
       <small class="field-error" *ngIf="pwModel.invalid && pwModel.touched">Mật khẩu tối thiểu 8 ký tự</small>
      <span class="forgot-password"><a [routerLink]="['/forgot-password']">Forgot Password ?</a></span>
      <div class="error" *ngIf="error">{{ error }}</div>
      <input class="login-button" type="submit" [disabled]="loading || f.invalid" value="Sign In">
    </form>

    <form class="form" *ngIf="awaitingVerification" (ngSubmit)="completeVerification()" #v="ngForm" novalidate>
      <div class="verification-note">Mã xác thực đã được gửi đến email của bạn. Vui lòng nhập mã để hoàn tất đăng nhập.</div>
      <input class="input" type="text" name="verificationCode" placeholder="Verification code" required minlength="6" maxlength="6" [(ngModel)]="verificationCode" #codeModel="ngModel">
      <div class="field-error" *ngIf="codeModel.invalid && codeModel.touched">Mã gồm 6 ký tự</div>
      <div *ngIf="devOtpVisible" class="dev-otp">DEV OTP: {{ devOtp }}</div>
      <div class="error" *ngIf="error">{{ error }}</div>
      <input class="login-button" type="submit" [disabled]="loading || v.invalid" value="Confirm">
    </form>
    <div class="social-account-container">
        <span class="title">Or Sign in with</span>
        <div class="social-accounts">
          <button class="social-button google" type="button" (click)="loginWithGoogle()" [disabled]="loading" aria-label="Sign in with Google">
            <svg class="svg" xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 488 512" aria-hidden="true">
              <path d="M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"></path>
            </svg>
          </button>
        </div>
      </div>
      <span class="agreement"><a href="#">Learn user licence agreement</a></span>
  </div>
</div>